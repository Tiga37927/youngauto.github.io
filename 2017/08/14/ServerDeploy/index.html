






<!doctype html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="Young">
  
  
  
  
    <meta name="description" content="阿里云安全组配置配置自己需要的端口，授权对象默认即可上述步骤完成后，需要在主机上配置防火墙[配置防火墙]: http://blog.sina.com.cn/s/blog_6e00431d0102vipz.html    “iptables配置”cat /etc/sysconfig/iptables查看防火墙规则文件
编辑该文件，添加自己在安全组配置的端口注意添加80端口，nginx默认监听8...">
  
  <title>阿里云部署nodejs项目 [ walker ]</title>
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  <link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">
  
</head>

<body>
<div class="side-navigate hide-area">
  
    <div class="item prev">
      <a href="/2017/08/28/WebSecurity/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        web安全
      </div>
    </div>
  
  
    <div class="item next">
      <a href="/2017/08/02/KoaLearn/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        koa学习进阶
      </div>
    </div>
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onclick="openUserCard()">
          <img id="avatar" src="/images/avator.png">
          <div id="homelink">walker</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/">首页</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">文章</a>
            
          </li>
        
          
            <li>
          
            <a href="/tags">标签</a>
            
          </li>
        
          
            <li>
          
            <a href="/categories">分类</a>
            
          </li>
        
          
            <li>
          
            <a href="/about">关于</a>
            
          </li>
        
          
            <li>
          
            <a href="https://github.com/youngauto">Github</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  <article id="post">
    <h1>阿里云部署nodejs项目</h1>
    <p class="page-title-sub">
      <span id="post-title-date">撰写于 2017-08-14</span>
      
        <span id="post-title-updated">修改于 2019-11-07</span>
      
      
      <span id="post-title-categories">分类
      
      
        
        
        <a href="/categories/nginx/">nginx</a>
      
        
          /
        
        
        <a href="/categories/nginx/其他/">其他</a>
      
        
          /
        
        
        <a href="/categories/nginx/其他/服务器/">服务器</a>
      
      </span>
      
      
      <span id="post-title-tags">
      标签
      
      
        
        
        <a href="/tags/nodejs/">nodejs</a>
      
        
          /
        
        
        <a href="/tags/center-os/">center os</a>
      
        
          /
        
        
        <a href="/tags/nginx/">nginx</a>
      
      </span>
      
    </p>
    
    <h3 id="阿里云安全组配置"><a href="#阿里云安全组配置" class="headerlink" title="阿里云安全组配置"></a>阿里云安全组配置</h3><p><img src="../images/TIM截图20170815102755.png" alt="TIM截图20170815102755"><br>配置自己需要的端口，授权对象默认即可<br>上述步骤完成后，需要在主机上配置防火墙<br>[配置防火墙]: <a href="http://blog.sina.com.cn/s/blog_6e00431d0102vipz.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_6e00431d0102vipz.html</a>    “iptables配置”<br><code>cat /etc/sysconfig/iptables</code>查看防火墙规则文件<br><img src="../images/TIM截图20170815103443.png" alt="TIM截图20170815103443"></p>
<p>编辑该文件，添加自己在安全组配置的端口<code>注意添加80端口，nginx默认监听80端口</code><br>保存后<code>service iptables save</code><br>重启防火墙<code>service iptables restart</code><br>配置完成</p>
<h3 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h3><ul>
<li>wget <a href="https://nodejs.org/dist/v6.9.5/node-v6.9.5-linux-x64.tar.xz" target="_blank" rel="noopener">https://nodejs.org/dist/v6.9.5/node-v6.9.5-linux-x64.tar.xz</a></li>
<li>tar xvf node-v6.9.5-linux-x64.tar.xz</li>
<li><p>切换到 root 用户，全局配置nodejs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line">在最下面加入</span><br><span class="line"># node （注释作用）</span><br><span class="line"><span class="keyword">export</span> NODE_HOME=<span class="regexp">/usr/</span>local/src/node</span><br><span class="line"><span class="keyword">export</span> PATH=$PATH:$NODE_HOME/bin  </span><br><span class="line"><span class="keyword">export</span> NODE_PATH=$NODE_HOME/lib/node_modules </span><br><span class="line">:wq （保存并退出）</span><br><span class="line">source /etc/profile （使配置文件生效）</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置npm淘宝镜像</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="keyword">set</span> registry https://registry.npm.taobao.org </span><br><span class="line">npm info underscore	// 有输出即可</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="安装配置nginx"><a href="#安装配置nginx" class="headerlink" title="安装配置nginx"></a>安装配置nginx</h3><p>压缩包和yum两种安装方式，这里介绍yum安装<br><code>yum install nginx</code><br><code>service nginx start</code><br><code>wget http://127.0.0.1 将会在当前路径下载一份index.html</code></p>
<p>nginx的配置文件在<code>/etc/nginx/nginx.conf</code>，代理的静态文件目录<code>/usr/share/nginx/html/</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">	# user  www www;</span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line">error_log /<span class="keyword">var</span>/log/nginx/error.log;</span><br><span class="line">pid       /<span class="keyword">var</span>/run/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">	use epoll;</span><br><span class="line">	worker_connections <span class="number">1024</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;	</span><br><span class="line">	include       mime.types;</span><br><span class="line">	default_type  application/octet-stream;</span><br><span class="line">	</span><br><span class="line">    #access_log    /var/log/nginx/access.log;</span><br><span class="line">	#log_format main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">    #                 '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">    #                 '"$http_user_agent" $http_x_forwarded_for';</span><br><span class="line">	</span><br><span class="line">	sendfile on;</span><br><span class="line">	# tcp_nopush on;</span><br><span class="line">	</span><br><span class="line">	# 连接超时时间</span><br><span class="line">	keepalive_timeout <span class="number">60</span>;</span><br><span class="line">	client_max_body_size <span class="number">10</span>m</span><br><span class="line">	client_body_buffer_size <span class="number">128</span>k</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	tcp_nodelay on;</span><br><span class="line">	fastcgi_connect_timeout <span class="number">300</span>;</span><br><span class="line">	fastcgi_send_timeout <span class="number">300</span>;</span><br><span class="line">	fastcgi_read_timeout <span class="number">300</span>;</span><br><span class="line">	fastcgi_buffer_size <span class="number">64</span>k;</span><br><span class="line">	fastcgi_buffers <span class="number">4</span> <span class="number">64</span>k;</span><br><span class="line">	fastcgi_busy_buffers_size <span class="number">128</span>k;</span><br><span class="line">	fastcgi_temp_file_write_size <span class="number">128</span>k;</span><br><span class="line">	</span><br><span class="line">  	# gzip压缩功能</span><br><span class="line">	gzip on;</span><br><span class="line">	gzip_min_length <span class="number">1</span>k;</span><br><span class="line">	gzip_buffers <span class="number">4</span> <span class="number">16</span>k;</span><br><span class="line">	gzip_http_version <span class="number">1.0</span>;</span><br><span class="line">	gzip_comp_level <span class="number">2</span>;</span><br><span class="line">	gzip_types text/plain application/x-javascript text/css application/xml;</span><br><span class="line">	gzip_proxied any;</span><br><span class="line">	gzip_vary on;</span><br><span class="line">	</span><br><span class="line">	# http_proxy 设置</span><br><span class="line">    proxy_connect_timeout   <span class="number">75</span>;</span><br><span class="line">    proxy_send_timeout   <span class="number">75</span>;</span><br><span class="line">    proxy_read_timeout   <span class="number">75</span>;</span><br><span class="line">    proxy_buffer_size   <span class="number">4</span>k;</span><br><span class="line">    proxy_buffers   <span class="number">4</span> <span class="number">32</span>k;</span><br><span class="line">    proxy_busy_buffers_size   <span class="number">64</span>k;</span><br><span class="line">    proxy_temp_file_write_size  <span class="number">64</span>k;</span><br><span class="line">    proxy_temp_path   /usr/local/nginx/proxy_temp <span class="number">1</span> <span class="number">2</span>;</span><br><span class="line">	</span><br><span class="line">	# 设定负载均衡的服务器列表</span><br><span class="line">	# upstream  eoms.17cai.com/qc-invoicing  &#123;</span><br><span class="line">	#	ip_hash;</span><br><span class="line">	#	server   localhost:8081 max_fails=2 fail_timeout=30s;</span><br><span class="line">	# &#125;</span><br><span class="line"></span><br><span class="line">	server &#123;</span><br><span class="line">		listen       <span class="number">80</span>;</span><br><span class="line">		# 使用http://eoms.17cai.com访问</span><br><span class="line">		server_name  39.108.166.103;#域名</span><br><span class="line">		root   /usr/share/nginx/html; #站点目录</span><br><span class="line">        index index.html index.htm index.jsp; # 定义首页索引文件的名称</span><br><span class="line">		#设定本虚拟主机的访问日志</span><br><span class="line">		access_log /<span class="keyword">var</span>/log/nginx/host.access.log main;</span><br><span class="line">		</span><br><span class="line">		# 默认请求</span><br><span class="line">		location / &#123;</span><br><span class="line">            # react,vue项目的index.html</span><br><span class="line">            expires <span class="number">15</span>d;</span><br><span class="line">        &#125;</span><br><span class="line">        # 拦截/api开头的请求(此处的请求没有带端口，此处可以屏蔽端口)，并将请求转发至http://host:8081</span><br><span class="line">     	location /api &#123;</span><br><span class="line">            proxy_pass        http:<span class="comment">//host:8081;</span></span><br><span class="line">			proxy_redirect off;</span><br><span class="line">			proxy_set_header  Host  $host;</span><br><span class="line">			proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">			proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">			proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		# 静态文件，nginx自己处理</span><br><span class="line">		location ~ .*\.(gif|jpg|jpeg|bmp|png|ico|txt|js|css)?$ &#123;</span><br><span class="line">			expires <span class="number">15</span>d;</span><br><span class="line">			access_log off;</span><br><span class="line">		&#125;</span><br><span class="line">		#location /nginx_status &#123;</span><br><span class="line">        #    stub_status on;</span><br><span class="line">        #    access_log off;</span><br><span class="line">        #    allow 192.168.10.0/24;</span><br><span class="line">        #    deny all;</span><br><span class="line">        #&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	#error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">	# redirect server error pages to the static page /50x.html</span><br><span class="line">	#</span><br><span class="line">	#error_page   500 502 503 504  /50x.html;</span><br><span class="line">	#location = /50x.html &#123;</span><br><span class="line">	#    root   html;</span><br><span class="line">	#&#125;</span><br><span class="line"></span><br><span class="line">	# proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">	#</span><br><span class="line">	#location ~ \.php$ &#123;</span><br><span class="line">	#    proxy_pass   http://127.0.0.1;</span><br><span class="line">	#&#125;</span><br><span class="line"></span><br><span class="line">	# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">	#</span><br><span class="line">	#location ~ \.php$ &#123;</span><br><span class="line">	#    root           html;</span><br><span class="line">	#    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">	#    fastcgi_index  index.php;</span><br><span class="line">	#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">	#    include        fastcgi_params;</span><br><span class="line">	#&#125;</span><br><span class="line"></span><br><span class="line">	# deny access to .htaccess files, if Apache's document root</span><br><span class="line">	# concurs with nginx's one</span><br><span class="line">	#</span><br><span class="line">	#location ~ /\.ht &#123;</span><br><span class="line">	#    deny  all;</span><br><span class="line">	#&#125;</span><br><span class="line">	#&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	# another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">	#</span><br><span class="line">	#server &#123;</span><br><span class="line">	#    listen       8000;</span><br><span class="line">	#    listen       somename:8080;</span><br><span class="line">	#    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">	#    location / &#123;</span><br><span class="line">	#        root   html;</span><br><span class="line">	#        index  index.html index.htm;</span><br><span class="line">	#    &#125;</span><br><span class="line">	#&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	# HTTPS server</span><br><span class="line">	#</span><br><span class="line">	#server &#123;</span><br><span class="line">	#    listen       443 ssl;</span><br><span class="line">	#    server_name  localhost;</span><br><span class="line"></span><br><span class="line">	#    ssl_certificate      cert.pem;</span><br><span class="line">	#    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">	#    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">	#    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">	#    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">	#    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">	#    location / &#123;</span><br><span class="line">	#        root   html;</span><br><span class="line">	#        index  index.html index.htm;</span><br><span class="line">	#    &#125;</span><br><span class="line">	#&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">显示目录</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">隐藏目录</button>
  <div class="random-toc">
    <h2>目录</h2>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#阿里云安全组配置"><span class="toc-text">阿里云安全组配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装nodejs"><span class="toc-text">安装nodejs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装配置nginx"><span class="toc-text">安装配置nginx</span></a></li></ol>
  </div>
</div>

  
<nav id="pagination">
  
    <a href="/2017/08/28/WebSecurity/" class="prev">&larr; 上一篇 web安全</a>
  

  

  
    <a href="/2017/08/02/KoaLearn/" class="next">下一篇 koa学习进阶 &rarr;</a>
  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by Young using
      <a href="http://hexo.io">Hexo</a> & <a href="https://github.com/stiekel/hexo-theme-random">Random</a>
      <br>
      
    </div>
  </div>
</div>

</div>



<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="/images/avator.png">
    <p id="description">web前端,javascript,react,vue,webpack等工作记录</p>
    <ul class="social-icon">
  
  
    <li>
      <a href="https://github.com/youngauto">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
    <li>
      <a href="https://coding.net/u/Stiekel">
        
          <i class="icon iconfont coding">&#xe607;</i>
        
      </a>
    </li>
  
    <li>
      <a href="https://twitter.com/SidCN">
        
          <i class="icon iconfont twitter">&#xe600;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://weibo.com/sidcn">
        
          <i class="icon iconfont weibo">&#xe602;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://www.douban.com/people/Stiekel/">
        
          <i class="icon iconfont douban">&#xe60f;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://chensd.com/feed">
        
          <i class="icon iconfont rss">&#xe60e;</i>
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>




  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"preload­Image":true,"transition":["slideLeft2","slideRight2","flash2"],"timer":true,"delay":5000,"shuffle":true,"count":10};
var unsplashConfig = {"gravity":"north"};
// is show background images
var turnoffBackgroundImage = false;



  turnoffBackgroundImage = true;


var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

